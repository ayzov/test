name: Custom Notification
on: [push]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      # Ð­Ñ‚Ð¾Ñ‚ ÑˆÐ°Ð³ Ð¾Ð±Ñ€ÐµÐ·Ð°ÐµÑ‚ Ð´Ð»Ð¸Ð½Ð½Ñ‹Ð¹ ID ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚Ð° Ð´Ð¾ 7 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²
      - name: Get short SHA
        id: vars
        run: echo "sha_short=$(echo ${{ github.sha }} | cut -c1-7)" >> $GITHUB_OUTPUT

      - name: Send Message
        uses: appleboy/discord-action@master
        with:
          webhook_id: ${{ secrets.WEBHOOK_ID }}
          webhook_token: ${{ secrets.WEBHOOK_TOKEN }}
          message: |
            ðŸ“¦ **ÐšÐ¾Ð¼Ð¼Ð¸Ñ‚ Ð² `${{ github.repository }}` (${{ github.ref_name }})**

            ${{ github.event.head_commit.message }}

            `${{ steps.vars.outputs.sha_short }}` â€” ${{ github.actor }}